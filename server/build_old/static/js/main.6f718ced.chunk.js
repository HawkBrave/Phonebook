(this.webpackJsonpex2_phonebook=this.webpackJsonpex2_phonebook||[]).push([[0],{13:function(e,n,t){"use strict";t.r(n);var r=t(0),c=t(1),a=t.n(c),o=t(6),u=t.n(o),i=t(3),s=function(e){var n=e.handleChange,t=e.search,c=e.setSearch;return Object(r.jsxs)("div",{children:["filter shown with ",Object(r.jsx)("input",{value:t,onChange:n(c)})]})},h=function(e){var n=e.person,t=e.handleClick;return Object(r.jsxs)("li",{children:[n.name," ",n.number," ",Object(r.jsx)("button",{onClick:t,children:"delete"})]})},d=function(e){var n=e.persons,t=e.search,c=e.handleClick;return Object(r.jsx)("ul",{children:""!==t?n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})).map((function(e){return Object(r.jsx)(h,{person:e,handleClick:function(){return c(e.id)}},e.id)})):n.map((function(e){return Object(r.jsx)(h,{person:e,handleClick:function(){return c(e.id)}},e.id)}))})},j=function(e){var n=e.addPerson,t=e.newName,c=e.setNewName,a=e.newNumber,o=e.setNewNumber,u=e.handleChange;return Object(r.jsxs)("form",{onSubmit:n,children:[Object(r.jsxs)("div",{children:["name: ",Object(r.jsx)("input",{value:t,onChange:u(c)})]}),Object(r.jsxs)("div",{children:["number: ",Object(r.jsx)("input",{value:a,onChange:u(o)})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"add"})})]})},f=t(2),b=t.n(f),l=t(4),p="/api/persons",m={getAll:function(){var e=Object(l.a)(b.a.mark((function e(){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(p);case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(l.a)(b.a.mark((function e(n){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(p,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),update:function(){var e=Object(l.a)(b.a.mark((function e(n,t){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(p,"/").concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 2:return r=e.sent,e.abrupt("return",r.json());case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),del:function(){var e=Object(l.a)(b.a.mark((function e(n){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(p,"/").concat(n),{method:"DELETE"});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()};var O=function(){var e=Object(c.useState)([]),n=Object(i.a)(e,2),t=n[0],a=n[1],o=Object(c.useState)(""),u=Object(i.a)(o,2),h=u[0],f=u[1],b=Object(c.useState)(""),l=Object(i.a)(b,2),p=l[0],O=l[1],x=Object(c.useState)(""),w=Object(i.a)(x,2),v=w[0],C=w[1];Object(c.useEffect)((function(){m.getAll().then((function(e){return a(e)})).catch((function(e){return console.log(e)}))}),[]);var k=function(e){return function(n){e(n.target.value)}};return Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"Phonebook"}),Object(r.jsx)(s,{handleChange:k,setSearch:C}),Object(r.jsx)("h2",{children:"add a new"}),Object(r.jsx)(j,{addPerson:function(e){e.preventDefault();var n={name:h,number:p},r=t.filter((function(e){return e.name.toLowerCase()===n.name.toLowerCase()})),c=Object(i.a)(r,1)[0];t.includes(c)?window.confirm("There's already a person with the same name, do you want to update the phone number?")&&m.update(n,c.id).then((function(e){a(t.map((function(n){return n.id===c.id?e:n})))})):m.create(n).then((function(e){a(t.concat(e))})),f(""),O("")},newName:h,setNewName:f,newNumber:p,setNewNumber:O,handleChange:k}),Object(r.jsx)("h2",{children:"Numbers"}),Object(r.jsx)(d,{persons:t,search:v,handleClick:function(e){window.confirm("Do you want to delete ".concat(t.filter((function(n){return n.id===e}))[0].name," from your phonebook?"))&&m.del(e).then((function(n){a(t.filter((function(n){return n.id!==e})))}))}})]})};u.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(O,{})}),document.getElementById("root"))}},[[13,1,2]]]);
//# sourceMappingURL=main.6f718ced.chunk.js.map